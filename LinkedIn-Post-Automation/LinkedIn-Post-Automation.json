{
  "name": "LinkedIn-Post-Automation",
  "nodes": [
    {
      "parameters": {
        "pollTimes": {
          "item": [
            {
              "mode": "everyMinute"
            }
          ]
        },
        "documentId": {
          "__rl": true,
          "value": "1hFVoJbPP9grTLgXpMa8v9PlJkUvhyQyERCBiVrZn1ZY",
          "mode": "list",
          "cachedResultName": "LinkedIn-Posts",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1hFVoJbPP9grTLgXpMa8v9PlJkUvhyQyERCBiVrZn1ZY/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "Posts",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1hFVoJbPP9grTLgXpMa8v9PlJkUvhyQyERCBiVrZn1ZY/edit#gid=0"
        },
        "event": "rowAdded",
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheetsTrigger",
      "typeVersion": 1,
      "position": [
        1376,
        -112
      ],
      "id": "6437105e-7e38-4157-ac8c-b8c8f5e515cf",
      "name": "Google Sheets Trigger",
      "credentials": {
        "googleSheetsTriggerOAuth2Api": {
          "id": "zrEVetOI51RBbiu2",
          "name": "Google Sheets Trigger account"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "049791a1-08e0-434b-bdc2-d88bf02da07a",
              "leftValue": "={{ $json.Status }}",
              "rightValue": "pending",
              "operator": {
                "type": "string",
                "operation": "equals",
                "name": "filter.operator.equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        1600,
        -112
      ],
      "id": "f8906632-0af8-4745-b711-ea19b1b2d638",
      "name": "If"
    },
    {
      "parameters": {},
      "type": "n8n-nodes-base.limit",
      "typeVersion": 1,
      "position": [
        1824,
        -112
      ],
      "id": "6e8fe7a2-2c38-4cbe-932b-7e9a8e7ebeee",
      "name": "Limit"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=You are an expert LinkedIn content creator and ghostwriter for top executives. Your specialty is crafting highly engaging, viral-style posts that blend deep insight with personal storytelling.\n\nYOUR MISSION: Transform the given title into a compelling LinkedIn post.\n\nPOST STRUCTURE:\n\nðŸš€ THE HOOK\nStart with a powerful, relatable hook. Use a surprising statistic, a bold opinion, a short story, or a rhetorical question.\n\nðŸ’¡ THE BODY\nWrite 3-4 distinct paragraphs:\n1. Elaborate on the hook and introduce the core problem/opportunity.\n2. Provide the main insight, lesson, or framework.\n3. Share a practical takeaway, step-by-step tip, or real-world example.\n4. (Optional) End with a forward-looking statement or key message summary.\n\nðŸ¤” THE CONVERSATION STARTER\nEnd with a thoughtful, open-ended question designed to spark comments and debate.\n\nðŸŽ¨ STYLING & FORMATTING\n- Use 2-3 relevant emojis strategically to break up text\n- Use single newline (\\n) for line breaks within sections\n- Use double newline (\\n\\n) between paragraphs, CTA, and hashtags\n- You may use single asterisks to create *italic text* for subtle emphasis\n\nðŸ·ï¸ HASHTAGS\nInclude 4-5 relevant hashtags at the end. Mix 1-2 broad tags with 2-3 niche ones.\n\nTECHNICAL RULES:\n- Keep the post under 1,900 characters\n- Ensure text is properly escaped for JSON\n- Do not use double quotes (\"\") in the response\n- Do not use markdown formatting\n- Maintain professional but engaging tone\n\nNow, create a LinkedIn post based on this title: \n{{ $json['LinkedIn-Posts-titles'] }}",
        "hasOutputParser": true,
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 2.2,
      "position": [
        2048,
        -112
      ],
      "id": "2256c482-658f-4e19-b6f2-164f1cb990a3",
      "name": "AI Agent"
    },
    {
      "parameters": {
        "modelName": "models/gemini-2.0-flash",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "typeVersion": 1,
      "position": [
        2120,
        320
      ],
      "id": "9de34318-00bd-4b70-a4be-1a9c57129bed",
      "name": "Google Gemini Chat Model",
      "credentials": {
        "googlePalmApi": {
          "id": "3LpnfUbS7zb88P3p",
          "name": "Google Gemini(PaLM) Api account 2"
        }
      }
    },
    {
      "parameters": {
        "schemaType": "manual",
        "inputSchema": "{\n\t\"type\": \"object\",\n\t\"properties\": {\n\t\t\"post\": {\n\t\t\t\"type\": \"string\"\n\t\t}\n}}",
        "autoFix": true
      },
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "typeVersion": 1.3,
      "position": [
        2336,
        128
      ],
      "id": "fbf72909-b739-4d90-9dcb-4e59674d37c1",
      "name": "Structured Output Parser"
    },
    {
      "parameters": {
        "url": "https://api.linkedin.com/v2/userinfo",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpHeaderAuth",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        2716,
        -112
      ],
      "id": "a116e804-4af1-4d02-9268-e6c3242d68f8",
      "name": "HTTP Request",
      "credentials": {
        "httpHeaderAuth": {
          "id": "VIm2TLVQZdrp3lNH",
          "name": "Header Auth account"
        }
      }
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.linkedin.com/v2/ugcPosts",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpHeaderAuth",
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={{ { \"author\": \"urn:li:person:\" + $('HTTP Request').first().json.sub, \"lifecycleState\": \"PUBLISHED\", \"specificContent\": { \"com.linkedin.ugc.ShareContent\": { \"shareCommentary\": { \"text\": $('AI Agent').first().json.output.post }, \"shareMediaCategory\": \"NONE\" } }, \"visibility\": { \"com.linkedin.ugc.MemberNetworkVisibility\": \"PUBLIC\" } } }}",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        2940,
        -112
      ],
      "id": "329db147-8dd2-4928-8480-537597112d9e",
      "name": "HTTP Request1",
      "credentials": {
        "httpHeaderAuth": {
          "id": "VIm2TLVQZdrp3lNH",
          "name": "Header Auth account"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "const items = $input.all();\nconst updatedItems = items.map((item) => {\n  item.json.output.post = item.json.output.post.replace(\n    /\\n/g,\n    '\\\\n',\n  );\n  return item;\n});\nreturn updatedItems;\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        2492,
        -112
      ],
      "id": "611b5cad-70d8-499c-b216-8123b4cbe562",
      "name": "Code in JavaScript"
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1hFVoJbPP9grTLgXpMa8v9PlJkUvhyQyERCBiVrZn1ZY",
          "mode": "list",
          "cachedResultName": "LinkedIn-Posts",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1hFVoJbPP9grTLgXpMa8v9PlJkUvhyQyERCBiVrZn1ZY/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "Posts",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1hFVoJbPP9grTLgXpMa8v9PlJkUvhyQyERCBiVrZn1ZY/edit#gid=0"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "ID": "={{ $('Limit').item.json.ID }}",
            "Status": "posted"
          },
          "matchingColumns": [
            "ID"
          ],
          "schema": [
            {
              "id": "ID",
              "displayName": "ID",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "LinkedIn-Posts-titles",
              "displayName": "LinkedIn-Posts-titles",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Status",
              "displayName": "Status",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        3152,
        -112
      ],
      "id": "58080870-8342-4ebd-9abf-7cef9a5e410c",
      "name": "Update row in sheet",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "raty1iv4aTcITP8I",
          "name": "Google Sheets account 2"
        }
      }
    }
  ],
  "pinData": {},
  "connections": {
    "Google Sheets Trigger": {
      "main": [
        [
          {
            "node": "If",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If": {
      "main": [
        [
          {
            "node": "Limit",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Limit": {
      "main": [
        [
          {
            "node": "AI Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Google Gemini Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "AI Agent",
            "type": "ai_languageModel",
            "index": 0
          },
          {
            "node": "Structured Output Parser",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Structured Output Parser": {
      "ai_outputParser": [
        [
          {
            "node": "AI Agent",
            "type": "ai_outputParser",
            "index": 0
          }
        ]
      ]
    },
    "AI Agent": {
      "main": [
        [
          {
            "node": "Code in JavaScript",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "HTTP Request": {
      "main": [
        [
          {
            "node": "HTTP Request1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript": {
      "main": [
        [
          {
            "node": "HTTP Request",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "HTTP Request1": {
      "main": [
        [
          {
            "node": "Update row in sheet",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": false,
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "bbab4d93-824d-4940-b749-d31030d71add",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "8eaaf9659b93f0c36de1e6ef4e0781f360a9ab1d6b2aa28330b7024e5df2c405"
  },
  "id": "Fuh8O00AyA8upMvs",
  "tags": []
}